jQuery(document).ready(function(e){function t(){e("#TB_window").css({height:e("#TB_ajaxContent").outerHeight()+30+"px",top:(e(window).height()+e(window).scrollTop())/2-(e("#TB_ajaxContent").outerHeight()-e(window).scrollTop()+30)/2+"px",opacity:1})}function i(t){var i=null;(i=void 0!==t?t:e(".shortcode-dynamic-item")).find(".redux-opts-upload").on("click",function(e){var t=jQuery(this).parent(),i=jQuery(this).attr("rel-id");e.preventDefault(),custom_file_frame=null,custom_file_frame=wp.media.frames.customHeader=wp.media({title:jQuery(this).data("choose"),library:{type:"image"},button:{text:jQuery(this).data("update")}}),custom_file_frame.on("select",function(){var e=custom_file_frame.state().get("selection").first();jQuery(".redux-opts-screenshot",t).prop("src",e.attributes.url),jQuery("#"+i).val(e.attributes.url).trigger("change"),jQuery(".redux-opts-upload",t).hide(),jQuery(".redux-opts-screenshot",t).show(),jQuery(".redux-opts-upload-remove",t).show()}),custom_file_frame.open()}),i.find(".redux-opts-upload-remove").on("click",function(e){var t=jQuery(this).parent(),i=jQuery(this).attr("rel-id");e.preventDefault(),jQuery("#"+i).val(""),jQuery(this).prev().fadeIn("slow"),jQuery(".redux-opts-screenshot",t).fadeOut("slow"),jQuery(this).fadeOut("slow")})}function o(){var t=e("#thb-shortcodes").val(),i="";switch(t){case"icon_list":if(e(".shortcode-options[data-name="+t+"]").is(":visible")){var o=e(".shortcode-options[data-name="+t+"]").find("select[id="+t+"-icon]").val()||"fa-ok";e(".shortcode-options[data-name="+t+"] .shortcode-dynamic-item-input").each(function(){""!=e(this).val()&&(tabContent=e(this).parents(".shortcode-dynamic-item").find(".shortcode-dynamic-item-input").val(),i+=" [item] "+tabContent+" [/item] ")})}e("#shortcode-storage-thb").html('[icon-list icon="'+o+'"]'+i+"[/icon-list]")}}function a(){var t=e("#thb-shortcodes").val(),i="";if("dynamic"==e("#options-"+t).data("type"))return o(),!1;switch(t){case"quote":var a=e("input[name="+t+"-align]:checked").val()||"",n=e("input[id="+t+"-author]").val(),r=e("textarea[id="+t+"-content]").val();if(""!=a)c='pull="'+a+'"';else var c="";i='[blockquote author="'+n+'" '+c+"]"+r+"[/blockquote]";break;case"thb_button":var s=e("input[name="+t+"-size]:checked").val()||"small",l=e("input[name="+t+"-color]:checked").val()||"black",d=e("input[name="+t+"-animation]:checked").val()||"",u=e("input[id="+t+"-icon]").val(),p=e("input[id="+t+"-title]").val(),h=e("input[id="+t+"-link]").val();if(m=e("input[id="+t+"-target_blank]:checked").length)m='target_blank="true"';else var m="";i='[thb_button link="'+h+'" color="'+l+'" icon="'+u+'" size="'+s+'" animation="'+d+'" '+m+' caption="'+p+'"]';break;case"video":i='[video id="'+e("input[id="+t+"-id]").val()+'" type="'+(e("input[name="+t+"-type]:checked").val()||"youtube")+'" format="'+(e("input[name="+t+"-format]:checked").val()||"widescreen")+'"]';break;case"small_title":i='[small_title title="'+(p=e("input[id="+t+"-title]").val()||"title")+'"]';break;case"large_title":p=e("input[id="+t+"-title]").val()||"title";if(v=e("input[id="+t+"-center]:checked").length)v='center="true"';else var v="";i='[large_title title="'+p+'" '+v+"]";break;case"tags":i='[tags color="'+(l=e("input[name="+t+"-color]:checked").val()||"black")+'"]'+(r=e("input[id="+t+"-text]").val())+"[/tags]";break;case"notifications":i='[notification type="'+(e("input[name="+t+"-type]:checked").val()||"success")+'" title="'+(p=e("input[id="+t+"-title]").val())+'"]'+(i=e("textarea[id="+t+"-content]").val())+"[/notification]";break;case"seperator":i='[seperator style="'+(e("input[name="+t+"-type]:checked").val()||"style1")+'"]'+(p=e("input[id="+t+"-title]").val()||"Divider")+"[/seperator]";break;case"dropcap":i='[dropcap boxed="'+(f=e("input[name="+t+"-boxed]:checked").val()||"black")+'"]A[/dropcap]';break;case"toggle":i='[toggle title="'+(p=e("input[id="+t+"-title]").val())+'"]'+(r=e("textarea[id="+t+"-content]").val())+"[/toggle]";break;case"single_icon":var h=e("input[id="+t+"-icon_link]").val(),u=e("select[id="+t+"-icon]").val()||"fa-leaf",s=e("input[name="+t+"-size]:checked").val()||"icon-smallsize",f=e("input[id="+t+"-boxed]:checked").length;e("input[id="+t+"-rounded]:checked").length;if(f)y='box="true"';else var y="";if(h)b='url="'+h+'"';else var b="";i='[icon type="'+u+'" size="'+s+'" '+b+" "+y+"]"}e("#shortcode-storage-thb").html(i)}e("#TB_window").css("opacity",0),setTimeout(t,100),e(window).resize(t),i(),e("select#thb-shortcodes").chosen(),e(".colorpicker").wpColorPicker({palettes:!1});var n=tinyMCE.activeEditor;e("#thb-shortcodes").change(function(){e(".shortcode-options").hide(),e("#options-"+e(this).val()).show(),a()}),e("#add-shortcode").click(function(){var t=e("#thb-shortcodes").val();e("#options-"+t).attr("data-type");return a(),n.selection.setContent(e("#shortcode-storage-thb").html()),tb_remove(),!1}),e("[id^=shortcode-option]").change(function(){a()}),e(".add-list-item").click(function(){e(this).parent().find(".remove-list-item").is(":visible")||e(this).parent().find(".remove-list-item").show();var t=e(this).parent().find(".shortcode-dynamic-item:first").clone();return t.find("input[type=text], textarea").prop("value",""),t.find(".redux-opts-upload").length>0&&(t.find(".redux-opts-screenshot").prop("src",""),t.find(".redux-opts-upload-remove").hide(),t.find(".redux-opts-upload").css("display","inline-block"),setTimeout(function(){i(t)},200)),e(this).parent().find(".shortcode-dynamic-items").append(t),!1}),e(".remove-list-item").hide().live("click",function(){return e(this).parent().find(".shortcode-dynamic-item").length>1&&(e(this).parent().find("#options-item .shortcode-dynamic-item:last").remove(),o()),1==e(this).parent().find(".shortcode-dynamic-item").length&&e(this).hide(),!1})});